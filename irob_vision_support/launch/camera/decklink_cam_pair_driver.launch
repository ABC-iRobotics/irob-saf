<!-- Launch file for left and right camera nodes using cv-camera -->

<launch>

	<arg name="left" default="left"/> 
	<arg name="right" default="right"/>
	
  <arg name="MODE" default="pal"/>
  <arg name="CONNECTION" default="sdi"/>
  <arg name="DEVICE_NUMBER_LEFT" default="0"/>
  <arg name="DEVICE_NUMBER_RIGHT" default="1"/>
  <arg name="PUBLISH_FRAME" default="false"/>
  
  
   <node name="left" pkg="gscam" type="gscam" output="screen">
    <param name="camera_name" value="default"/>
    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_config" value="decklinkvideosrc mode=$(arg MODE) connection=$(arg CONNECTION) device-number=$(arg DEVICE_NUMBER_LEFT) ! videoconvert ! deinterlace ! videoconvert"/>
    <param name="frame_id" value="/decklink_frame_left"/>
    <!-- This needs to be set to false to avoid dropping tons of frames -->
    <param name="sync_sink" value="false"/>
    <remap from="camera/image_raw" to="$(arg left)/image_raw"/>
		<remap from="camera/camera_info" to="$(arg left)/camera_info"/>
  </node>
  
     <node name="right" pkg="gscam" type="gscam" output="screen">
    <param name="camera_name" value="default"/>
    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_config" value="decklinkvideosrc mode=$(arg MODE) connection=$(arg CONNECTION) device-number=$(arg DEVICE_NUMBER_RIGHT) ! videoconvert ! deinterlace ! videoconvert"/>
    <param name="frame_id" value="/decklink_frame_right"/>
    <!-- This needs to be set to false to avoid dropping tons of frames -->
    <param name="sync_sink" value="false"/>
    		<remap from="camera/image_raw" to="$(arg right)/image_raw"/>
		<remap from="camera/camera_info" to="$(arg right)/camera_info"/>
  </node>
  
  


</launch>
